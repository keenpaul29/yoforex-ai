 .github/workflows/deploy.yml
 name: CI/CD Deploy YoForex-AI Backend

 on:
   push:
     branches:
       - main

 jobs:
   build-and-deploy:
     runs-on: ubuntu-latest

     steps:
       - name: Checkout repository
         uses: actions/checkout@v3

       - name: Set up Python 3.10
         uses: actions/setup-python@v4
         with:
           python-version: '3.10'

-      - name: Install dependencies
-        run: |
-          python -m pip install --upgrade pip
-          pip install -r requirements.txt
-
-      - name: Install pytest
-        run: pip install pytest
+      - name: Install dependencies & pytest
+        run: |
+          python -m pip install --upgrade pip
+          # install your app deps plus pytest into the same environment
+          python -m pip install -r requirements.txt pytest

       - name: Run tests
-        run: |
-          pytest --maxfail=1 --disable-warnings -q
+        run: |
+          # use the module invocation so pytest doesnâ€™t need its CLI script on PATH
+          python -m pytest --maxfail=1 --disable-warnings -q

       - name: Deploy to server
         uses: appleboy/ssh-action@v0.1.8
         with:
           host: ${{ secrets.SSH_HOST }}
           username: ${{ secrets.SSH_USER }}
           key: ${{ secrets.SSH_PRIVATE_KEY }}
           port: 22
           script: |
             cd /home/yoforexai
             git pull origin main
             python -m pip install --upgrade pip
             pip install -r requirements.txt
             sudo systemctl restart backend.service
